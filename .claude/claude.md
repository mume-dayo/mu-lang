# Mumei Language Project

## プロジェクト概要
Pythonベースの新しいプログラミング言語「Mumei（むめい）」の実装プロジェクト。
簡潔な構文と強力な機能を持つインタプリタ言語。

## 技術スタック
- 言語: Python 3.x
- レキサー: mm_lexer.py
- パーサー: mm_parser.py
- インタプリタ: mm_interpreter.py
- 拡張機能: Discord bot、HTTP、ファイルI/O、標準ライブラリ

## コーディング規約
- 日本語コメントを使用
- docstringは日本語で記述
- クラス名はPascalCase
- 関数名はsnake_case
- 定数は大文字のSNAKE_CASE

## 実装済み機能
- 基本的なデータ型（数値、文字列、真偽値、None、リスト、辞書、set）
- 制御構文（if/elif/else、while、for、break、continue、pass）
- 関数定義とクロージャ
- ラムダ式
- リスト内包表記
- 辞書内包表記
- スライス記法
- 複数代入とアンパック
- 可変長引数（*args）
- ジェネレーターとyield（遅延評価、ループ内のyield完全対応）
- import/moduleシステム（メソッドチェーン対応 - mod.func()形式）
- クラスとOOP（継承、インスタンス化、メンバー代入）
- **デコレーター（@decorator）** - 関数をラップしてメタプログラミングが可能
- **型アノテーション** - 関数のパラメータと戻り値に型ヒント記述可能（param: type, -> return_type）
- **アサーション（assert文）** - テストとデバッグのための条件チェック
- **列挙型（Enum）** - 定数のグループ化と名前付き定数の定義
- **プロパティ（@property）** - クラスのプロパティアクセス制御の基本機能
- 例外処理（try/catch/finally、throw）
- 三項演算子
- ウォルラス演算子（:=）
- with文
- match/case文
- 非同期処理（async/await）
- Discord bot機能
  - 基本的なコマンド登録
  - イベントハンドラ
  - Embed（リッチメッセージ）
  - インタラクション（ボタン、セレクトメニュー）
  - Modalダイアログ（テキスト入力フォーム）
  - スラッシュコマンド（/コマンド形式）
  - データ永続化（JSON）
  - モデレーション機能
- HTTP リクエスト
- ファイルI/O
- 環境変数アクセス
- 標準ライブラリ（数学、文字列、リスト操作など）
- デバッグユーティリティ


## 最新の改善（2025年版）
- **型チェッカー** - 型アノテーションを実行時に検証（警告として表示）
- **デコレーター引数サポート** - `@decorator(args)`形式のデコレーターファクトリーに対応
- **プロパティのsetter基本実装** - プロパティへの代入処理の基礎を構築
- **ジェネレーターのネストループ完全対応** - 複雑なネストループ内のyieldを完全サポート

## 今後実装予定の機能（優先順位順）
1. プロパティのgetter自動呼び出し完全対応 - 現在は部分的な実装
2. REPLの改善 - 複数行入力、履歴、補完機能
3. スタックトレースとエラーメッセージの改善 - 行番号と詳細なコンテキスト情報
4. パフォーマンス最適化 - バイトコードコンパイル
5. パッケージマネージャー - 外部ライブラリの管理
6. マルチスレッド/マルチプロセス
7. デバッガーの改善 - ブレークポイントとステップ実行

## ワークフロー
1. 機能実装時は以下の順で作業:
   - mm_lexer.py: トークン定義
   - mm_parser.py: AST ノード定義とパース処理
   - mm_interpreter.py: 評価処理
   - vscode-mumei/syntaxes/mumei.tmLanguage.json: シンタックスハイライト
   - examples/: サンプルコード作成
   - git commit & push

2. コミットメッセージは日本語で記述する
3. コミットメッセージには署名やクレジット（🤖 Generated with... や Co-Authored-By: Claude...）を含めない
4. サンプルコードは必ず作成し、examples/フォルダに配置
5. Discord bot機能で実用的なものがあれば、examplesフォルダに追加する

## 注意事項
- 既存の機能を壊さないように注意
- 新機能追加時は必ずサンプルコードで動作確認
- Pythonの構文に近づけつつ、独自性も保つ
- コードの実装完了時はultrathinkを使いダメな部分を探す
## タスク完了後の報告形式
実装が終了した後は、必ず以下の形式で日本語で報告すること：

### 実装した機能
- 何を実装したか詳細に説明
- どのファイルを変更したか
- どのような動作をするか

### 今後の改善点
- 次に実装すべき機能
- 現在の実装の問題点や改善案
- より良い実装方法の提案
